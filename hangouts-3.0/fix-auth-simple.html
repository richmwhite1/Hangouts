<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Auth Fix</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        .status { padding: 15px; margin: 15px 0; border-radius: 8px; font-weight: bold; }
        .success { background-color: #d4edda; color: #155724; border: 2px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 2px solid #f5c6cb; }
        button { background-color: #28a745; color: white; padding: 20px 40px; border: none; border-radius: 8px; cursor: pointer; font-size: 18px; margin: 20px 0; width: 100%; }
        button:hover { background-color: #218838; }
        .code { background-color: #f8f9fa; padding: 10px; border-radius: 4px; font-family: monospace; margin: 10px 0; word-break: break-all; }
    </style>
</head>
<body>
    <h1>üîß Simple Authentication Fix</h1>
    
    <div class="status error">
        <strong>‚ö†Ô∏è CRITICAL:</strong> Your frontend is using an invalid token. This will fix it immediately.
    </div>
    
    <p><strong>Current Problem:</strong> Your browser is using token for user ID <code>cmfxfsg530000jpvtkb1aawyv</code> (which doesn't exist in database)</p>
    
    <p><strong>Solution:</strong> Replace it with the correct token for user ID <code>cmfyi6rmm0000jp4yv9r4nq8c</code></p>
    
    <button id="fixAuthButton">üîë FIX AUTHENTICATION NOW</button>
    
    <div id="status"></div>

    <script>
        // Correct authentication data
        const correctToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWZ5aTZybW0wMDAwanA0eXY5cjRucThjIiwiZW1haWwiOiJrYXJsQGVtYWlsLmNvbSIsInVzZXJuYW1lIjoia2FybCIsImlhdCI6MTc1ODc0OTc0MywiZXhwIjoxNzU5MzU0NTQzfQ.2Q3vFE250O6shvjjlDuF9mRHPZW_7du5xzLXsBUmGDM";
        const correctUser = {
            "id": "cmfyi6rmm0000jp4yv9r4nq8c",
            "email": "karl@email.com",
            "username": "karl",
            "name": "Karl Test User"
        };

        function updateStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        document.getElementById('fixAuthButton').addEventListener('click', () => {
            try {
                console.log('üßπ Clearing old authentication data...');
                
                // Clear ALL possible auth keys
                const keysToRemove = [
                    'auth_token', 'auth_user', 'token', 'user', 
                    'access_token', 'refresh_token', 'jwt_token',
                    'authToken', 'authUser', 'userToken', 'userData',
                    'auth', 'userData', 'session', 'login'
                ];
                
                keysToRemove.forEach(key => {
                    localStorage.removeItem(key);
                    sessionStorage.removeItem(key);
                });
                
                console.log('üîë Setting correct authentication...');
                
                // Set correct data
                localStorage.setItem('auth_token', correctToken);
                localStorage.setItem('auth_user', JSON.stringify(correctUser));
                sessionStorage.setItem('auth_token', correctToken);
                sessionStorage.setItem('auth_user', JSON.stringify(correctUser));
                
                // Verify
                const storedToken = localStorage.getItem('auth_token');
                const storedUser = JSON.parse(localStorage.getItem('auth_user') || '{}');
                
                if (storedToken === correctToken && storedUser.id === correctUser.id) {
                    updateStatus(`
                        ‚úÖ <strong>AUTHENTICATION FIXED SUCCESSFULLY!</strong><br><br>
                        <strong>Old User ID:</strong> cmfxfsg530000jpvtkb1aawyv (INVALID)<br>
                        <strong>New User ID:</strong> ${storedUser.id} (VALID)<br>
                        <strong>Username:</strong> ${storedUser.username}<br>
                        <strong>Email:</strong> ${storedUser.email}<br><br>
                        <strong>üéâ Now go back to your main app and try creating a hangout!</strong>
                    `, 'success');
                } else {
                    updateStatus('‚ùå Authentication verification failed. Please try again.', 'error');
                }
                
            } catch (e) {
                updateStatus('‚ùå Error: ' + e.message, 'error');
                console.error('Error:', e);
            }
        });
    </script>
</body>
</html>



























